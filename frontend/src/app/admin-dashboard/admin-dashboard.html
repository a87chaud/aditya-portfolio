<div class="admin-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Admin Panel</h2>
    </div>

    <nav class="sidebar-nav">
      <button
        [class.active]="currentView === 'dashboard'"
        (click)="setView('dashboard')"
        class="nav-item"
      >
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        Dashboard
      </button>

      <button
        [class.active]="currentView === 'experience'"
        (click)="setView('experience')"
        class="nav-item"
      >
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M20 7h-3a2 2 0 0 1-2-2V2M9 18v-5"></path>
          <path d="M4 20h16a2 2 0 0 0 2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"></path>
        </svg>
        Experience
      </button>

      <button
        [class.active]="currentView === 'projects'"
        (click)="setView('projects')"
        class="nav-item"
      >
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"
          ></path>
        </svg>
        Projects
      </button>

      <button [class.active]="currentView === 'blog'" (click)="setView('blog')" class="nav-item">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        Blog
      </button>
    </nav>

    <div class="sidebar-footer">
      <button (click)="logout()" class="btn-logout">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        Logout
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Dashboard View -->
    <div *ngIf="currentView === 'dashboard'" class="content-section fade-in">
      <div class="section-header">
        <h1>Dashboard</h1>
        <p>Overview of your portfolio content</p>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">üíº</div>
          <div class="stat-info">
            <h3>{{ experiences().length }}</h3>
            <p>Experience Entries</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">üöÄ</div>
          <div class="stat-info">
            <h3>{{ projects().length }}</h3>
            <p>Projects</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">üìù</div>
          <div class="stat-info">
            <h3>{{ blogPosts().length }}</h3>
            <p>Blog Posts</p>
          </div>
        </div>
      </div>

      <div class="quick-actions">
        <h2>Quick Actions</h2>
        <div class="actions-grid">
          <button (click)="setView('experience'); openExperienceForm()" class="action-btn">
            <span class="action-icon">‚ûï</span>
            <span>Add Experience</span>
          </button>
          <button (click)="setView('projects'); openProjectForm()" class="action-btn">
            <span class="action-icon">‚ûï</span>
            <span>Add Project</span>
          </button>
          <button (click)="setView('blog'); openBlogForm()" class="action-btn">
            <span class="action-icon">‚ûï</span>
            <span>New Blog Post</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Experience View -->
    <div *ngIf="currentView === 'experience'" class="content-section fade-in">
      <div class="section-header">
        <div>
          <h1>Work Experience</h1>
          <p>Manage your professional experience</p>
        </div>
        <button (click)="openExperienceForm('add')" class="btn-primary">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Add Experience
        </button>
      </div>

      <div class="data-table" *ngIf="experiences().length > 0">
        <div *ngFor="let exp of experiences()" class="table-row">
          <div class="row-content">
            <div class="row-main">
              <h3>{{ exp.position }}</h3>
              <p>{{ exp.company }}</p>
            </div>
            <div class="row-meta">
              <span class="badge" *ngIf="exp.current">Current</span>
              <span class="date">{{ exp.startDate }}</span>
            </div>
          </div>
          <div class="row-actions">
            <button (click)="openExperienceForm('edit', exp)" class="btn-icon" title="Edit">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
            </button>
            <button (click)="deleteExperience(exp.id!)" class="btn-icon btn-danger" title="Delete">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="experiences().length === 0" class="empty-state">
        <p>No experience entries yet. Add your first one!</p>
      </div>
    </div>

    <!-- Projects View -->
    <div *ngIf="currentView === 'projects'" class="content-section fade-in">
      <div class="section-header">
        <div>
          <h1>Projects</h1>
          <p>Showcase your work</p>
        </div>
        <button (click)="openProjectForm('add')" class="btn-primary">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Add Project
        </button>
      </div>

      <div class="data-table" *ngIf="projects().length > 0">
        <div *ngFor="let project of projects()" class="table-row">
          <div class="row-content">
            <div class="row-main">
              <h3>{{ project.title }}</h3>
              <p>{{ project.description }}</p>
            </div>
            <div class="row-meta">
              <span class="badge badge-success" *ngIf="project.featured">Featured</span>
            </div>
          </div>
          <div class="row-actions">
            <button (click)="openProjectForm('edit', project)" class="btn-icon" title="Edit">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
            </button>
            <button (click)="deleteProject(project.id!)" class="btn-icon btn-danger" title="Delete">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="projects().length === 0" class="empty-state">
        <p>No projects yet. Add your first one!</p>
      </div>
    </div>

    <!-- Blog View -->
    <div *ngIf="currentView === 'blog'" class="content-section fade-in">
      <div class="section-header">
        <div>
          <h1>Blog Posts</h1>
          <p>Your daily accountability log</p>
        </div>
        <button (click)="openBlogForm('add')" class="btn-primary">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          New Post
        </button>
      </div>

      <div class="data-table" *ngIf="blogPosts().length > 0">
        <div *ngFor="let post of blogPosts()" class="table-row">
          <div class="row-content">
            <div class="row-main">
              <h3>{{ post.title }}</h3>
              <p>{{ post.summary || 'No summary' }}</p>
            </div>
            <div class="row-meta">
              <span
                class="badge"
                [class.badge-success]="post.published"
                [class.badge-secondary]="!post.published"
              >
                {{ post.published ? 'Published' : 'Draft' }}
              </span>
            </div>
          </div>
          <div class="row-actions">
            <button (click)="openBlogForm('edit', post)" class="btn-icon" title="Edit">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
            </button>
            <button (click)="deleteBlogPost(post.id!)" class="btn-icon btn-danger" title="Delete">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="blogPosts().length === 0" class="empty-state">
        <p>No blog posts yet. Start your accountability journey!</p>
      </div>
    </div>
  </main>

  <!-- Experience Form Modal -->
  <div class="modal" *ngIf="showExperienceForm" (click)="closeExperienceForm()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ formMode === 'add' ? 'Add' : 'Edit' }} Experience</h2>
        <button (click)="closeExperienceForm()" class="btn-close">‚úï</button>
      </div>
      <form (ngSubmit)="saveExperience()" class="form">
        <div class="form-group">
          <label>Position *</label>
          <input type="text" [(ngModel)]="experienceForm.position" name="position" required />
        </div>

        <div class="form-group">
          <label>Company *</label>
          <input type="text" [(ngModel)]="experienceForm.company" name="company" required />
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Start Date *</label>
            <input type="month" [(ngModel)]="experienceForm.startDate" name="startDate" required />
          </div>

          <div class="form-group">
            <label>End Date</label>
            <input
              type="month"
              [(ngModel)]="experienceForm.endDate"
              name="endDate"
              [disabled]="experienceForm.current || false"
            />
          </div>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="experienceForm.current" name="current" />
            Currently working here
          </label>
        </div>

        <div class="form-group">
          <label>Description *</label>
          <textarea
            [(ngModel)]="experienceForm.description"
            name="description"
            rows="4"
            required
          ></textarea>
        </div>

        <div class="form-group">
          <label>Technologies</label>
          <div class="array-input">
            <div
              *ngFor="let tech of experienceForm.technologies; let i = index; trackBy: trackByIndex"
              class="array-item"
            >
              <input
                type="text"
                [(ngModel)]="experienceForm.technologies![i]"
                [name]="'tech-' + i"
              />
              <button type="button" (click)="removeTechnology('experience', i)" class="btn-remove">
                ‚úï
              </button>
            </div>
            <button type="button" (click)="addTechnology('experience')" class="btn-add">
              + Add Technology
            </button>
          </div>
        </div>

        <div class="form-group">
          <label>Order</label>
          <input type="number" [(ngModel)]="experienceForm.order" name="order" />
        </div>

        <div class="form-actions">
          <button type="button" (click)="closeExperienceForm()" class="btn-secondary">
            Cancel
          </button>
          <button type="submit" class="btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Project Form Modal -->
  <div class="modal" *ngIf="showProjectForm" (click)="closeProjectForm()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ formMode === 'add' ? 'Add' : 'Edit' }} Project</h2>
        <button (click)="closeProjectForm()" class="btn-close">‚úï</button>
      </div>
      <form (ngSubmit)="saveProject()" class="form">
        <div class="form-group">
          <label>Title *</label>
          <input type="text" [(ngModel)]="projectForm.title" name="title" required />
        </div>

        <div class="form-group">
          <label>Description *</label>
          <textarea
            [(ngModel)]="projectForm.description"
            name="description"
            rows="4"
            required
          ></textarea>
        </div>

        <div class="form-group">
          <label>Technologies</label>
          <div class="array-input">
            <div
              *ngFor="let tech of projectForm.technologies; let i = index; trackBy: trackByIndex"
              class="array-item"
            >
              <input type="text" [(ngModel)]="projectForm.technologies![i]" [name]="'tech-' + i" />
              <button type="button" (click)="removeTechnology('project', i)" class="btn-remove">
                ‚úï
              </button>
            </div>
            <button type="button" (click)="addTechnology('project')" class="btn-add">
              + Add Technology
            </button>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>GitHub URL</label>
            <input type="url" [(ngModel)]="projectForm.githubUrl" name="githubUrl" />
          </div>

          <div class="form-group">
            <label>Live URL</label>
            <input type="url" [(ngModel)]="projectForm.liveUrl" name="liveUrl" />
          </div>
        </div>

        <div class="form-group">
          <label>Image URL</label>
          <input type="url" [(ngModel)]="projectForm.imageUrl" name="imageUrl" />
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="projectForm.featured" name="featured" />
              Featured project
            </label>
          </div>

          <div class="form-group">
            <label>Order</label>
            <input type="number" [(ngModel)]="projectForm.order" name="order" />
          </div>
        </div>

        <div class="form-actions">
          <button type="button" (click)="closeProjectForm()" class="btn-secondary">Cancel</button>
          <button type="submit" class="btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Blog Form Modal -->
  <div class="modal" *ngIf="showBlogForm" (click)="closeBlogForm()">
    <div class="modal-content modal-lg" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ formMode === 'add' ? 'New' : 'Edit' }} Blog Post</h2>
        <button (click)="closeBlogForm()" class="btn-close">‚úï</button>
      </div>
      <form (ngSubmit)="saveBlogPost()" class="form">
        <div class="form-group">
          <label>Title *</label>
          <input type="text" [(ngModel)]="blogForm.title" name="title" required />
        </div>

        <div class="form-group">
          <label>Summary</label>
          <textarea [(ngModel)]="blogForm.summary" name="summary" rows="2"></textarea>
        </div>

        <div class="form-group">
          <label>Content *</label>
          <textarea [(ngModel)]="blogForm.content" name="content" rows="12" required></textarea>
        </div>

        <div class="form-group">
          <label>Tags</label>
          <div class="array-input">
            <div
              *ngFor="let tag of blogForm.tags; let i = index; trackBy: trackByIndex"
              class="array-item"
            >
              <input type="text" [(ngModel)]="blogForm.tags![i]" [name]="'tag-' + i" />
              <button type="button" (click)="removeTag(i)" class="btn-remove">‚úï</button>
            </div>
            <button type="button" (click)="addTag()" class="btn-add">+ Add Tag</button>
          </div>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="blogForm.published" name="published" />
            Publish immediately
          </label>
        </div>

        <div class="form-actions">
          <button type="button" (click)="closeBlogForm()" class="btn-secondary">Cancel</button>
          <button type="submit" class="btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>
